{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ZB56\\\\Documents\\\\HSEats1-Zack\\\\HSEats1-Zack\\\\src\\\\auth\\\\Signup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { UserOutlined, LockOutlined, CloseOutlined, MailOutlined } from '@ant-design/icons';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Card, Typography, Input, Button } from 'antd';\nimport AuthContext from './AuthContext';\nimport logo from '../img/hsekey.png';\nimport axios from 'axios';\nconst {\n  Title,\n  Text\n} = Typography;\n\nconst Signup = ({\n  history\n}) => {\n  _s();\n\n  const {\n    setAuth\n  } = useContext(AuthContext);\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n    vpassword: \"\",\n    name: \"\"\n  });\n  const [errors, setErrors] = useState([]);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    document.title = \"HSE Key | Signup\";\n  }, []);\n\n  const handleForm = e => {\n    setFormData({ ...formData,\n      [e.target.id]: e.target.value\n    });\n  };\n\n  const redirect = new URLSearchParams(useHistory().location.search).get('redirect');\n\n  const signup = async () => {\n    const {\n      email,\n      password,\n      vpassword,\n      name\n    } = formData;\n\n    if (!name) {\n      setErrors([{\n        msg: \"Please enter your name\"\n      }]);\n    } else if (!email) {\n      setErrors([{\n        msg: \"Please enter a valid email\"\n      }]);\n    } else if (!password) {\n      setErrors([{\n        msg: \"Please enter a valid password\"\n      }]);\n    } else if (!vpassword) {\n      setErrors([{\n        msg: \"Please verify your password\"\n      }]);\n    } else if (vpassword !== password) {\n      setErrors([{\n        msg: \"Your passwords don't match\"\n      }]);\n    } else {\n      try {\n        setLoading(true);\n        const body = {\n          email: email,\n          password: password,\n          name: name\n        };\n        const res = await axios.post(`${process.env.REACT_APP_AUTH_API}/user/signup?timestamp=${new Date().getTime()}`, body);\n        setAuth({\n          user: null,\n          toFetch: true,\n          token: res.data\n        });\n        localStorage.setItem(\"token\", res.data);\n\n        if (redirect) {\n          history.push(redirect);\n        } else {\n          history.push(\"/\");\n        }\n      } catch (err) {\n        var _err$response, _err$response$data;\n\n        setLoading(false);\n\n        if ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.errors) {\n          setErrors(err.response.data.errors);\n        } else {\n          setErrors([{\n            msg: \"Server Error\"\n          }]);\n        }\n      }\n    }\n\n    setTimeout(() => setErrors([]), 2500);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"100vh\",\n      width: \"100vw\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      background: \"#fafcff\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: 450,\n        borderRadius: \"20px\",\n        background: \"#fff\",\n        boxShadow: \" 0px 8px 15px -2px rgba(0,0,0,0.1)\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"100%\",\n          margin: \"20px 0px 20px 0px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"78%\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            level: 2,\n            style: {\n              color: \"#444\",\n              paddingTop: \"10px\"\n            },\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 20\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logo,\n            alt: \"rip\",\n            style: {\n              width: \"calc(48px * 0.55)\",\n              height: \"calc(50px * 0.55)\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 20\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          size: \"default\",\n          autoComplete: \"off\",\n          id: \"name\",\n          placeholder: \"Enter name\",\n          onChange: handleForm,\n          style: {\n            borderRadius: \"25px\",\n            height: \"40px\",\n            width: \"80% \",\n            margin: \"25px 0px 10px 0px\"\n          },\n          prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {\n            style: {\n              marginRight: \"10px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 212\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          size: \"default\",\n          autoComplete: \"off\",\n          id: \"email\",\n          placeholder: \"Enter email\",\n          onChange: handleForm,\n          style: {\n            borderRadius: \"25px\",\n            height: \"40px\",\n            width: \"80% \",\n            margin: \"10px 0px 10px 0px\"\n          },\n          prefix: /*#__PURE__*/_jsxDEV(MailOutlined, {\n            style: {\n              marginRight: \"10px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 214\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(Input.Password, {\n          size: \"default\",\n          autoComplete: \"off\",\n          id: \"password\",\n          placeholder: \"Enter password\",\n          onChange: handleForm,\n          style: {\n            borderRadius: \"25px\",\n            height: \"40px\",\n            width: \"80% \",\n            margin: \"10px 0px 10px 0px\"\n          },\n          prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {\n            style: {\n              marginRight: \"10px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 227\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(Input.Password, {\n          size: \"default\",\n          autoComplete: \"off\",\n          id: \"vpassword\",\n          placeholder: \"Verify password\",\n          onChange: handleForm,\n          style: {\n            borderRadius: \"25px\",\n            height: \"40px\",\n            width: \"80% \",\n            margin: \"10px 0px 25px 0px\"\n          },\n          prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {\n            style: {\n              marginRight: \"10px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 229\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 16\n        }, this), errors.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"0px 0px 0px 0px\",\n            display: \"flex\",\n            alignItems: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(CloseOutlined, {\n            style: {\n              fontSize: \"16px\",\n              marginRight: \"5px\",\n              color: \"red\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 24\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Text, {\n            type: \"danger\",\n            children: [\" \", errors[0].msg, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 100\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 20\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"0px 0px 0px 0px\",\n            display: \"flex\",\n            alignItems: \"center\",\n            visibility: \"hidden\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(CloseOutlined, {\n            style: {\n              fontSize: \"16px\",\n              marginRight: \"5px\",\n              color: \"red\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 24\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Text, {\n            type: \"danger\",\n            children: \" Error \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 100\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          loading: loading,\n          type: \"primary\",\n          block: true,\n          onClick: signup,\n          style: {\n            borderRadius: \"25px\",\n            height: \"40px\",\n            width: \"80% \",\n            margin: \"10px 0px 15px 0px\"\n          },\n          children: \"Signup\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          style: {\n            margin: \"0px 0px 10px 0px\"\n          },\n          children: [\"Already have an HSE key account? \", /*#__PURE__*/_jsxDEV(Link, {\n            to: `/login${redirect ? `?redirect=${redirect}` : \"\"}`,\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 92\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Signup, \"Nog4u0y8+/AdCwF4oG2QieqEXXU=\", false, function () {\n  return [useHistory];\n});\n\n_c = Signup;\nexport default Signup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["C:/Users/ZB56/Documents/HSEats1-Zack/HSEats1-Zack/src/auth/Signup.js"],"names":["React","useContext","useEffect","useState","UserOutlined","LockOutlined","CloseOutlined","MailOutlined","Link","useHistory","Card","Typography","Input","Button","AuthContext","logo","axios","Title","Text","Signup","history","setAuth","formData","setFormData","email","password","vpassword","name","errors","setErrors","loading","setLoading","document","title","handleForm","e","target","id","value","redirect","URLSearchParams","location","search","get","signup","msg","body","res","post","process","env","REACT_APP_AUTH_API","Date","getTime","user","toFetch","token","data","localStorage","setItem","push","err","response","setTimeout","height","width","display","justifyContent","alignItems","background","borderRadius","boxShadow","margin","flexDirection","color","paddingTop","marginRight","length","fontSize","visibility"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect,useState}from 'react'\nimport { UserOutlined, LockOutlined, CloseOutlined, MailOutlined } from '@ant-design/icons';\nimport {Link, useHistory} from 'react-router-dom'\nimport { Card, Typography, Input, Button} from 'antd';\nimport AuthContext from './AuthContext'\nimport logo from '../img/hsekey.png'\nimport axios from 'axios'\nconst {Title, Text} = Typography\n\n\nconst Signup = ({history}) => {\n    const {setAuth} = useContext(AuthContext)\n    const[formData, setFormData] = useState({email: \"\", password:\"\", vpassword: \"\", name: \"\"})\n    const [errors,setErrors] = useState([])\n    const[loading, setLoading] = useState(false)\n    useEffect(() => {\n        document.title = \"HSE Key | Signup\"\n    }, [])\n\n    const handleForm = e => {\n        setFormData({...formData, [e.target.id]: e.target.value})\n     }\n\n     const redirect = (new URLSearchParams(useHistory().location.search)).get('redirect')\n\n    const signup = async () => {\n        const {email, password, vpassword, name} = formData\n        if(!name){\n            setErrors([{msg: \"Please enter your name\"}])\n        } else if(!email) {\n            setErrors([{msg: \"Please enter a valid email\"}])\n        }else if(!password) {\n            setErrors([{msg: \"Please enter a valid password\"}])\n        } else if (!vpassword) {\n            setErrors([{msg: \"Please verify your password\"}])\n        } else if(vpassword !== password){\n            setErrors([{msg: \"Your passwords don't match\"}])\n        } else {\n            try{\n                setLoading(true)\n                const body = {email: email, password: password, name: name}\n                const res = await axios.post(`${process.env.REACT_APP_AUTH_API}/user/signup?timestamp=${new Date().getTime()}`, body)\n\n                setAuth({user: null, toFetch: true, token: res.data})\n                \n                localStorage.setItem(\"token\", res.data)\n                if(redirect){\n                    history.push(redirect)\n                } else {\n                    history.push(\"/\")\n                }\n                \n            } catch(err){\n                setLoading(false)\n\n                if(err.response?.data?.errors){\n                    setErrors(err.response.data.errors)  \n                } else {\n                    setErrors([{msg: \"Server Error\"}])\n                }\n            }\n        }\n        setTimeout(() => setErrors([]), 2500)\n    }\n    return(\n        <div style={{height: \"100vh\", width:\"100vw\", display: \"flex\", justifyContent: \"center\", alignItems:\"center\",  background: \"#fafcff\"}}>\n        <Card style={{ width: 450, borderRadius: \"20px\", background: \"#fff\", boxShadow: \" 0px 8px 15px -2px rgba(0,0,0,0.1)\" }}>\n            <div style={{width: \"100%\", margin:\"20px 0px 20px 0px\",display: \"flex\", alignItems: \"center\", flexDirection: \"column\"}}>\n                <div style={{width: \"78%\", display: \"flex\",alignItems:\"center\", justifyContent: \"space-between\"}}>\n                   <Title level={2} style={{color: \"#444\", paddingTop:\"10px\"}}>Sign Up</Title>\n                   <img src={logo} alt={\"rip\"} style={{width: \"calc(48px * 0.55)\", height:\"calc(50px * 0.55)\"}}></img>\n                </div>\n               <br></br>\n               <Input size=\"default\" autoComplete=\"off\" id=\"name\" placeholder=\"Enter name\" onChange={handleForm} style={{borderRadius: \"25px\", height:\"40px\" , width: \"80% \",margin: \"25px 0px 10px 0px\"}} prefix={<UserOutlined style={{marginRight: \"10px\"}}/>} />\n               <Input size=\"default\" autoComplete=\"off\" id=\"email\" placeholder=\"Enter email\" onChange={handleForm} style={{borderRadius: \"25px\", height:\"40px\" , width: \"80% \",margin: \"10px 0px 10px 0px\"}} prefix={<MailOutlined style={{marginRight: \"10px\"}}/>} />\n               <Input.Password size=\"default\"autoComplete=\"off\" id=\"password\" placeholder=\"Enter password\" onChange={handleForm} style={{borderRadius: \"25px\", height:\"40px\" ,width: \"80% \",margin: \"10px 0px 10px 0px\"}} prefix={<LockOutlined style={{marginRight: \"10px\"}}/>} />\n               <Input.Password size=\"default\"autoComplete=\"off\" id=\"vpassword\" placeholder=\"Verify password\" onChange={handleForm} style={{borderRadius: \"25px\", height:\"40px\" ,width: \"80% \",margin: \"10px 0px 25px 0px\"}} prefix={<LockOutlined style={{marginRight: \"10px\"}}/>} />\n\n               {errors.length > 0 ? \n                   <div style={{margin: \"0px 0px 0px 0px\", display: \"flex\", alignItems: \"center\"}}>\n                       <CloseOutlined style={{fontSize:\"16px\",marginRight:\"5px\" , color: \"red\"}}/> <Text type=\"danger\"> {errors[0].msg} </Text>\n                   </div>\n                :\n                   <div style={{margin: \"0px 0px 0px 0px\", display: \"flex\", alignItems: \"center\", visibility: \"hidden\"}}>\n                       <CloseOutlined style={{fontSize:\"16px\",marginRight:\"5px\" , color: \"red\"}}/> <Text type=\"danger\"> Error </Text>\n                   </div>\n               }\n               <Button loading={loading} type=\"primary\" block onClick={signup} style={{borderRadius: \"25px\",height:\"40px\" , width: \"80% \",margin: \"10px 0px 15px 0px\"}}>Signup</Button>\n               <Text style={{margin: \"0px 0px 10px 0px\"}}>Already have an HSE key account? <Link to={`/login${redirect ? `?redirect=${redirect}`  : \"\"}`}>Login</Link></Text>\n            </div>\n        </Card>\n   </div>\n    )\n}\n\n\nexport default Signup"]},"metadata":{},"sourceType":"module"}