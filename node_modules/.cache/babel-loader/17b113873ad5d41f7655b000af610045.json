{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ZB56\\\\Documents\\\\HSEats1-Zack\\\\HSEats1-Zack\\\\src\\\\auth\\\\ResetPassword.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { CloseOutlined, LockOutlined, CheckCircleTwoTone, LoadingOutlined, CloseCircleTwoTone } from '@ant-design/icons';\nimport { Link, useParams } from 'react-router-dom';\nimport { Card, Typography, Input, Button } from 'antd';\nimport logo from '../img/hsekey.png';\nimport axios from 'axios';\nconst {\n  Title,\n  Text\n} = Typography;\n\nconst Verify = ({\n  history\n}) => {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const [updated, setUpdated] = useState(false);\n  const [error] = useState(false);\n  const [formData, setFormData] = useState({\n    email: \"\"\n  });\n  const [errors, setErrors] = useState([]);\n  const {\n    token\n  } = useParams('emailToken');\n  useEffect(() => {\n    document.title = \"HSE Key | Signup\";\n  }, []);\n\n  const handleForm = e => {\n    setFormData({ ...formData,\n      [e.target.id]: e.target.value\n    });\n  };\n\n  const sendEmail = async () => {\n    const {\n      password,\n      vpassword\n    } = formData;\n\n    if (!password) {\n      setErrors([{\n        msg: \"Please enter a valid password\"\n      }]);\n    } else if (!vpassword) {\n      setErrors([{\n        msg: \"Please verify your password\"\n      }]);\n    } else if (vpassword !== password) {\n      setErrors([{\n        msg: \"Your passwords don't match\"\n      }]);\n    } else {\n      try {\n        setLoading(true);\n        const body = {\n          password,\n          token\n        };\n        const res = await axios.put(`${process.env.REACT_APP_AUTH_API}/user/password/`, body);\n        setLoading(false);\n        setUpdated(true);\n      } catch (err) {\n        var _err$response, _err$response$data;\n\n        setLoading(false);\n\n        if ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.errors) {\n          setErrors(err.response.data.errors);\n        } else {\n          setErrors([{\n            msg: \"Server Error\"\n          }]);\n        }\n      }\n    }\n\n    setTimeout(() => setErrors([]), 2500); // try{\n    //     const res = await axios.put(`${process.env.REACT_APP_AUTH_API}/user/password/reset`, {email: formData.email})\n    //     setLoading(false)                \n    //     setUpdated(true)\n    // } catch(err){\n    //     setLoading(false)\n    //     setError(true)\n    // }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"100vh\",\n      width: \"100vw\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      background: \"#fafcff\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: 450,\n        height: 350,\n        borderRadius: \"20px\",\n        background: \"#fff\",\n        boxShadow: \" 0px 8px 15px -2px rgba(0,0,0,0.1)\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"100%\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: 'flex-start',\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"78%\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            level: 3,\n            style: {\n              color: \"#444\",\n              paddingTop: \"10px\"\n            },\n            children: \"Password Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 20\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            onClick: () => setLoading(!loading),\n            src: logo,\n            alt: \"rip\",\n            style: {\n              width: \"calc(48px * 0.55)\",\n              height: \"calc(50px * 0.55)\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 20\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 16\n        }, this), !updated ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Input.Password, {\n            size: \"default\",\n            autoComplete: \"off\",\n            id: \"password\",\n            placeholder: \"Enter new password\",\n            onChange: handleForm,\n            style: {\n              borderRadius: \"25px\",\n              height: \"40px\",\n              width: \"80% \",\n              margin: \"10px 0px 10px 0px\"\n            },\n            prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {\n              style: {\n                marginRight: \"10px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 231\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(Input.Password, {\n            size: \"default\",\n            autoComplete: \"off\",\n            id: \"vpassword\",\n            placeholder: \"Verify new password\",\n            onChange: handleForm,\n            style: {\n              borderRadius: \"25px\",\n              height: \"40px\",\n              width: \"80% \",\n              margin: \"10px 0px 15px 0px\"\n            },\n            prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {\n              style: {\n                marginRight: \"10px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 233\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 16\n          }, this), errors.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              margin: \"0px 0px 0px 0px\",\n              display: \"flex\",\n              alignItems: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(CloseOutlined, {\n              style: {\n                fontSize: \"16px\",\n                marginRight: \"5px\",\n                color: \"red\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this), \" \", /*#__PURE__*/_jsxDEV(Text, {\n              type: \"danger\",\n              children: [\" \", errors[0].msg, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 105\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              margin: \"0px 0px 0px 0px\",\n              display: \"flex\",\n              alignItems: \"center\",\n              visibility: \"hidden\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(CloseOutlined, {\n              style: {\n                fontSize: \"16px\",\n                marginRight: \"5px\",\n                color: \"red\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this), \" \", /*#__PURE__*/_jsxDEV(Text, {\n              type: \"danger\",\n              children: \" Error \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 105\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            loading: loading,\n            type: \"primary\",\n            block: true,\n            onClick: sendEmail,\n            style: {\n              borderRadius: \"25px\",\n              height: \"40px\",\n              width: \"80% \",\n              margin: \"15px 0px 15px 0px\"\n            },\n            children: \"Update Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                width: '30%',\n                justifyContent: 'center',\n                marginTop: '60px'\n              },\n              children: /*#__PURE__*/_jsxDEV(LoadingOutlined, {\n                style: {\n                  fontSize: '35px',\n                  color: \"#1890ff\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 21\n            }, this)\n          }, void 0, false) : !error ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                width: '38%',\n                justifyContent: 'space-between',\n                marginTop: '60px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(CheckCircleTwoTone, {\n                style: {\n                  fontSize: '20px'\n                },\n                twoToneColor: \"#52c41a\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                children: \" Password Changed \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              style: {\n                margin: \"125px 0px 10px 0px\"\n              },\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/login`,\n                children: \"Go to Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 70\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                width: '30%',\n                justifyContent: 'space-between',\n                marginTop: '60px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(CloseCircleTwoTone, {\n                style: {\n                  fontSize: '20px'\n                },\n                twoToneColor: \"#ff4d4f\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                children: \" Server Error \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              style: {\n                margin: \"125px 0px 10px 0px\"\n              },\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/login`,\n                children: \"Go to Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 70\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Verify, \"KOFFJ6MMHgbI43GYzQ8vrN2XEQY=\", false, function () {\n  return [useParams];\n});\n\n_c = Verify;\nexport default Verify;\n\nvar _c;\n\n$RefreshReg$(_c, \"Verify\");","map":{"version":3,"sources":["C:/Users/ZB56/Documents/HSEats1-Zack/HSEats1-Zack/src/auth/ResetPassword.js"],"names":["React","useEffect","useState","CloseOutlined","LockOutlined","CheckCircleTwoTone","LoadingOutlined","CloseCircleTwoTone","Link","useParams","Card","Typography","Input","Button","logo","axios","Title","Text","Verify","history","loading","setLoading","updated","setUpdated","error","formData","setFormData","email","errors","setErrors","token","document","title","handleForm","e","target","id","value","sendEmail","password","vpassword","msg","body","res","put","process","env","REACT_APP_AUTH_API","err","response","data","setTimeout","height","width","display","justifyContent","alignItems","background","borderRadius","boxShadow","flexDirection","color","paddingTop","margin","marginRight","length","fontSize","visibility","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect,useState}from 'react'\nimport { CloseOutlined, LockOutlined, CheckCircleTwoTone, LoadingOutlined, CloseCircleTwoTone } from '@ant-design/icons';\nimport {Link, useParams} from 'react-router-dom'\nimport { Card, Typography, Input, Button} from 'antd';\nimport logo from '../img/hsekey.png'\nimport axios from 'axios'\nconst {Title, Text} = Typography\n\n\nconst Verify = ({history}) => {\n    const [loading,setLoading] = useState(false)\n    const [updated, setUpdated] = useState(false)\n    const [error] = useState(false)\n\n    const[formData, setFormData] = useState({email: \"\"})\n\n    const [errors,setErrors] = useState([])\n\n\n\n    const {token} = useParams('emailToken')\n\n\n    useEffect(() => {\n        document.title = \"HSE Key | Signup\"\n    }, [])\n\n    const handleForm = e => {\n        setFormData({...formData, [e.target.id]: e.target.value})\n     }\n\n    const sendEmail = async () => {\n\n        const { password, vpassword} = formData\n        if(!password) {\n            setErrors([{msg: \"Please enter a valid password\"}])\n        } else if (!vpassword) {\n            setErrors([{msg: \"Please verify your password\"}])\n        } else if(vpassword !== password){\n            setErrors([{msg: \"Your passwords don't match\"}])\n        } else {\n            try{\n                setLoading(true)\n                const body = {password, token}\n                const res = await axios.put(`${process.env.REACT_APP_AUTH_API}/user/password/`, body)\n                \n                setLoading(false)\n                setUpdated(true)\n\n                \n            } catch(err){\n                setLoading(false)\n\n                if(err.response?.data?.errors){\n                    setErrors(err.response.data.errors)  \n                } else {\n                    setErrors([{msg: \"Server Error\"}])\n                }\n            }\n        }\n        setTimeout(() => setErrors([]), 2500)\n       \n            // try{\n                \n            //     const res = await axios.put(`${process.env.REACT_APP_AUTH_API}/user/password/reset`, {email: formData.email})\n\n                \n            //     setLoading(false)                \n            //     setUpdated(true)\n\n            // } catch(err){\n            //     setLoading(false)\n            //     setError(true)\n            // }\n    }\n    return(\n        <div style={{height: \"100vh\", width:\"100vw\", display: \"flex\", justifyContent: \"center\", alignItems:\"center\",  background: \"#fafcff\"}}>\n        <Card style={{ width: 450, height: 350,borderRadius: \"20px\", background: \"#fff\", boxShadow: \" 0px 8px 15px -2px rgba(0,0,0,0.1)\" }}>\n            <div style={{width: \"100%\",display: \"flex\", alignItems: \"center\", justifyContent: 'flex-start',flexDirection: \"column\"}}>\n                <div style={{width: \"78%\", display: \"flex\",alignItems:\"center\", justifyContent: \"space-between\"}}>\n                   <Title level={3} style={{color: \"#444\", paddingTop:\"10px\"}}>Password Reset</Title>\n                   <img onClick={() => setLoading(!loading)} src={logo} alt={\"rip\"} style={{width: \"calc(48px * 0.55)\", height:\"calc(50px * 0.55)\"}}></img>\n                </div>\n               <br></br>\n               {!updated ? \n               <>\n               <Input.Password size=\"default\"autoComplete=\"off\" id=\"password\" placeholder=\"Enter new password\" onChange={handleForm} style={{borderRadius: \"25px\", height:\"40px\" ,width: \"80% \",margin: \"10px 0px 10px 0px\"}} prefix={<LockOutlined style={{marginRight: \"10px\"}}/>} />\n               <Input.Password size=\"default\"autoComplete=\"off\" id=\"vpassword\" placeholder=\"Verify new password\" onChange={handleForm} style={{borderRadius: \"25px\", height:\"40px\" ,width: \"80% \",margin: \"10px 0px 15px 0px\"}} prefix={<LockOutlined style={{marginRight: \"10px\"}}/>} /> \n               {errors.length > 0 ? \n                        <div style={{margin: \"0px 0px 0px 0px\", display: \"flex\", alignItems: \"center\"}}>\n                            <CloseOutlined style={{fontSize:\"16px\",marginRight:\"5px\" , color: \"red\"}}/> <Text type=\"danger\"> {errors[0].msg} </Text>\n                        </div>\n                     :\n                        <div style={{margin: \"0px 0px 0px 0px\", display: \"flex\", alignItems: \"center\", visibility: \"hidden\"}}>\n                            <CloseOutlined style={{fontSize:\"16px\",marginRight:\"5px\" , color: \"red\"}}/> <Text type=\"danger\"> Error </Text>\n                        </div>\n                    }              \n               <Button loading={loading} type=\"primary\" block onClick={sendEmail} style={{borderRadius: \"25px\",height:\"40px\" , width: \"80% \",margin: \"15px 0px 15px 0px\"}}>Update Password</Button>\n               </>\n                :\n                <>\n               {loading ? \n                <>\n                    <div style={{display:'flex', alignItems: 'center', width: '30%', justifyContent:'center', marginTop: '60px'}}>\n                        <LoadingOutlined style={{fontSize: '35px', color: \"#1890ff\"}}></LoadingOutlined>                            \n                    </div>\n\n                </>\n               : \n                !error ?\n                    <>\n                        <div style={{display:'flex', alignItems: 'center', width: '38%', justifyContent:'space-between', marginTop: '60px'}}>\n                            <CheckCircleTwoTone style={{fontSize: '20px'}} twoToneColor=\"#52c41a\" />\n                            <Text > Password Changed </Text>\n                        </div>\n                        <Text style={{margin: \"125px 0px 10px 0px\"}}><Link to={`/login`}>Go to Login</Link></Text>\n                    </>\n                    :\n                    <>\n                        <div style={{display:'flex', alignItems: 'center', width: '30%', justifyContent:'space-between', marginTop: '60px'}}>\n                            <CloseCircleTwoTone style={{fontSize: '20px'}} twoToneColor=\"#ff4d4f\" />\n                            <Text> Server Error </Text>\n                        </div>\n                        <Text style={{margin: \"125px 0px 10px 0px\"}}><Link to={`/login`}>Go to Login</Link></Text>\n                    </>\n               }\n               </>\n                }\n            </div>\n        </Card>\n   </div>\n    )\n}\n\n\nexport default Verify"]},"metadata":{},"sourceType":"module"}