{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ZB56\\\\Documents\\\\HSEats1-Zack\\\\HSEats1-Zack\\\\src\\\\auth\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { UserOutlined, LockOutlined, CloseOutlined } from '@ant-design/icons';\nimport { Card, Typography, Input, Button } from 'antd';\nimport { Link, useHistory } from 'react-router-dom';\nimport AuthContext from './AuthContext';\nimport logo from '../img/hsekey.png';\nimport axios from 'axios';\nconst {\n  Title,\n  Text\n} = Typography;\n\nconst Login = ({\n  history\n}) => {\n  _s();\n\n  const {\n    setAuth\n  } = useContext(AuthContext);\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState([]);\n  const redirect = new URLSearchParams(useHistory().location.search).get('redirect');\n  useEffect(() => {\n    document.title = \"HSE Key | Login\";\n  }, []);\n\n  const handleForm = e => {\n    setFormData({ ...formData,\n      [e.target.id]: e.target.value\n    });\n  };\n\n  const login = async () => {\n    const {\n      email,\n      password\n    } = formData;\n\n    if (!email) {\n      setErrors([{\n        msg: \"Please enter a valid email\"\n      }]);\n    } else if (!password) {\n      setErrors([{\n        msg: \"Please enter a valid password\"\n      }]);\n    } else {\n      try {\n        setLoading(true);\n        const body = {\n          email: email,\n          password: password\n        };\n        const res = await axios.post(`${process.env.REACT_APP_AUTH_API}/user/login?timestamp=${new Date().getTime()}`, body);\n        setAuth({\n          user: null,\n          toFetch: true,\n          token: res.data\n        });\n        localStorage.setItem(\"token\", res.data);\n        history.push(\"/\");\n      } catch (err) {\n        var _err$response, _err$response$data;\n\n        setLoading(false);\n\n        if ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.errors) {\n          setErrors(err.response.data.errors);\n        } else {\n          setErrors([{\n            msg: \"Server Error\"\n          }]);\n        }\n      }\n    }\n\n    setTimeout(() => setErrors([]), 2500);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"100vh\",\n      width: \"100vw\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      background: \"#fafcff\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: 450,\n        borderRadius: \"20px\",\n        background: \"#fff\",\n        boxShadow: \" 0px 8px 15px -2px rgba(0,0,0,0.1)\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"100%\",\n          margin: \"20px 0px 20px 0px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"78%\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            level: 2,\n            style: {\n              color: \"#444\",\n              paddingTop: \"10px\"\n            },\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logo,\n            alt: \"rip\",\n            style: {\n              width: \"calc(48px * 0.55)\",\n              height: \"calc(50px * 0.55)\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          size: \"default\",\n          autoComplete: \"off\",\n          id: \"email\",\n          placeholder: \"Enter email\",\n          onChange: handleForm,\n          style: {\n            borderRadius: \"25px\",\n            height: \"40px\",\n            width: \"80% \",\n            margin: \"25px 0px 10px 0px\",\n            boxShadow: \"0 0 0px 1000px white inset\"\n          },\n          prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {\n            style: {\n              marginRight: \"10px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 258\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input.Password, {\n          onPressEnter: () => login(),\n          size: \"default\",\n          autoComplete: \"off\",\n          id: \"password\",\n          placeholder: \"Enter password\",\n          onChange: handleForm,\n          style: {\n            borderRadius: \"25px\",\n            height: \"40px\",\n            width: \"80% \",\n            margin: \"10px 0px 25px 0px\"\n          },\n          prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {\n            style: {\n              marginRight: \"10px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 262\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), errors.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"0px 0px 0px 0px\",\n            display: \"flex\",\n            alignItems: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(CloseOutlined, {\n            style: {\n              fontSize: \"16px\",\n              marginRight: \"5px\",\n              color: \"red\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 29\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Text, {\n            type: \"danger\",\n            children: [\" \", errors[0].msg, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 105\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"0px 0px 0px 0px\",\n            display: \"flex\",\n            alignItems: \"center\",\n            visibility: \"hidden\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(CloseOutlined, {\n            style: {\n              fontSize: \"16px\",\n              marginRight: \"5px\",\n              color: \"red\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 29\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Text, {\n            type: \"danger\",\n            children: \" Error \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 105\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          loading: loading,\n          type: \"primary\",\n          block: true,\n          onClick: login,\n          style: {\n            borderRadius: \"25px\",\n            height: \"40px\",\n            width: \"80% \",\n            margin: \"15px 0px 15px 0px\"\n          },\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          style: {\n            margin: \"0px 0px 15px 0px\",\n            textAlign: 'right'\n          },\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/forgot-password\",\n            children: \"Forgot password?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 84\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          style: {\n            margin: \"0px 0px 0px 0px\"\n          },\n          children: [\"Don't have an HSE Key account? \", /*#__PURE__*/_jsxDEV(Link, {\n            to: `/signup${redirect ? `?redirect=${redirect}` : \"\"}`,\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 94\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 18\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 14\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"EoifOndUldbprFoZ/nzXxPkMF7g=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/ZB56/Documents/HSEats1-Zack/HSEats1-Zack/src/auth/Login.js"],"names":["React","useContext","useEffect","useState","UserOutlined","LockOutlined","CloseOutlined","Card","Typography","Input","Button","Link","useHistory","AuthContext","logo","axios","Title","Text","Login","history","setAuth","formData","setFormData","email","password","loading","setLoading","errors","setErrors","redirect","URLSearchParams","location","search","get","document","title","handleForm","e","target","id","value","login","msg","body","res","post","process","env","REACT_APP_AUTH_API","Date","getTime","user","toFetch","token","data","localStorage","setItem","push","err","response","setTimeout","height","width","display","justifyContent","alignItems","background","borderRadius","boxShadow","margin","flexDirection","color","paddingTop","marginRight","length","fontSize","visibility","textAlign"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAoD,OAApD;AACA,SAASC,YAAT,EAAuBC,YAAvB,EAAqCC,aAArC,QAA0D,mBAA1D;AACA,SAASC,IAAT,EAAeC,UAAf,EAA2BC,KAA3B,EAAkCC,MAAlC,QAA+C,MAA/C;AACA,SAAQC,IAAR,EAAcC,UAAd,QAA+B,kBAA/B;AAEA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,MAAM;AAACC,EAAAA,KAAD;AAAQC,EAAAA;AAAR,IAAgBT,UAAtB;;AAIA,MAAMU,KAAK,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAe;AAAA;;AACzB,QAAM;AAACC,IAAAA;AAAD,MAAYnB,UAAU,CAACY,WAAD,CAA5B;AACA,QAAK,CAACQ,QAAD,EAAWC,WAAX,IAA0BnB,QAAQ,CAAC;AAACoB,IAAAA,KAAK,EAAE,EAAR;AAAYC,IAAAA,QAAQ,EAAC;AAArB,GAAD,CAAvC;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBvB,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACwB,MAAD,EAAQC,SAAR,IAAqBzB,QAAQ,CAAC,EAAD,CAAnC;AAGA,QAAM0B,QAAQ,GAAI,IAAIC,eAAJ,CAAoBlB,UAAU,GAAGmB,QAAb,CAAsBC,MAA1C,CAAD,CAAoDC,GAApD,CAAwD,UAAxD,CAAjB;AAEA/B,EAAAA,SAAS,CAAC,MAAM;AACZgC,IAAAA,QAAQ,CAACC,KAAT,GAAiB,iBAAjB;AACH,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMC,UAAU,GAAGC,CAAC,IAAI;AACrBf,IAAAA,WAAW,CAAC,EAAC,GAAGD,QAAJ;AAAc,OAACgB,CAAC,CAACC,MAAF,CAASC,EAAV,GAAeF,CAAC,CAACC,MAAF,CAASE;AAAtC,KAAD,CAAX;AACF,GAFD;;AAIA,QAAMC,KAAK,GAAG,YAAY;AACtB,UAAM;AAAClB,MAAAA,KAAD;AAAQC,MAAAA;AAAR,QAAoBH,QAA1B;;AACA,QAAG,CAACE,KAAJ,EAAU;AACNK,MAAAA,SAAS,CAAC,CAAC;AAACc,QAAAA,GAAG,EAAE;AAAN,OAAD,CAAD,CAAT;AACH,KAFD,MAEO,IAAG,CAAClB,QAAJ,EAAc;AACjBI,MAAAA,SAAS,CAAC,CAAC;AAACc,QAAAA,GAAG,EAAE;AAAN,OAAD,CAAD,CAAT;AACH,KAFM,MAEA;AACH,UAAG;AACChB,QAAAA,UAAU,CAAC,IAAD,CAAV;AACA,cAAMiB,IAAI,GAAG;AAACpB,UAAAA,KAAK,EAAEA,KAAR;AAAeC,UAAAA,QAAQ,EAAEA;AAAzB,SAAb;AACA,cAAMoB,GAAG,GAAG,MAAM7B,KAAK,CAAC8B,IAAN,CAAY,GAAEC,OAAO,CAACC,GAAR,CAAYC,kBAAmB,yBAAwB,IAAIC,IAAJ,GAAWC,OAAX,EAAqB,EAA1F,EAA6FP,IAA7F,CAAlB;AAEAvB,QAAAA,OAAO,CAAC;AAAC+B,UAAAA,IAAI,EAAE,IAAP;AAAaC,UAAAA,OAAO,EAAE,IAAtB;AAA4BC,UAAAA,KAAK,EAAET,GAAG,CAACU;AAAvC,SAAD,CAAP;AAEAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BZ,GAAG,CAACU,IAAlC;AAEAnC,QAAAA,OAAO,CAACsC,IAAR,CAAa,GAAb;AAIH,OAbD,CAaE,OAAMC,GAAN,EAAU;AAAA;;AACRhC,QAAAA,UAAU,CAAC,KAAD,CAAV;;AAEA,6BAAGgC,GAAG,CAACC,QAAP,wEAAG,cAAcL,IAAjB,uDAAG,mBAAoB3B,MAAvB,EAA8B;AAC1BC,UAAAA,SAAS,CAAC8B,GAAG,CAACC,QAAJ,CAAaL,IAAb,CAAkB3B,MAAnB,CAAT;AAEH,SAHD,MAGO;AACHC,UAAAA,SAAS,CAAC,CAAC;AAACc,YAAAA,GAAG,EAAE;AAAN,WAAD,CAAD,CAAT;AACH;AACJ;AACJ;;AACDkB,IAAAA,UAAU,CAAC,MAAMhC,SAAS,CAAC,EAAD,CAAhB,EAAsB,IAAtB,CAAV;AAGH,GAlCD;;AAmCA,sBACI;AAAK,IAAA,KAAK,EAAE;AAACiC,MAAAA,MAAM,EAAE,OAAT;AAAkBC,MAAAA,KAAK,EAAC,OAAxB;AAAiCC,MAAAA,OAAO,EAAE,MAA1C;AAAkDC,MAAAA,cAAc,EAAE,QAAlE;AAA4EC,MAAAA,UAAU,EAAC,QAAvF;AAAiGC,MAAAA,UAAU,EAAE;AAA7G,KAAZ;AAAA,2BACK,QAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAEJ,QAAAA,KAAK,EAAE,GAAT;AAAcK,QAAAA,YAAY,EAAE,MAA5B;AAAoCD,QAAAA,UAAU,EAAE,MAAhD;AAAwDE,QAAAA,SAAS,EAAE;AAAnE,OAAb;AAAA,6BACI;AAAK,QAAA,KAAK,EAAE;AAACN,UAAAA,KAAK,EAAE,MAAR;AAAgBO,UAAAA,MAAM,EAAC,mBAAvB;AAA2CN,UAAAA,OAAO,EAAE,MAApD;AAA4DE,UAAAA,UAAU,EAAE,QAAxE;AAAkFK,UAAAA,aAAa,EAAE;AAAjG,SAAZ;AAAA,gCACI;AAAK,UAAA,KAAK,EAAE;AAACR,YAAAA,KAAK,EAAE,KAAR;AAAeC,YAAAA,OAAO,EAAE,MAAxB;AAA+BE,YAAAA,UAAU,EAAC,QAA1C;AAAoDD,YAAAA,cAAc,EAAE;AAApE,WAAZ;AAAA,kCACG,QAAC,KAAD;AAAO,YAAA,KAAK,EAAE,CAAd;AAAiB,YAAA,KAAK,EAAE;AAACO,cAAAA,KAAK,EAAE,MAAR;AAAgBC,cAAAA,UAAU,EAAC;AAA3B,aAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADH,eAEG;AAAK,YAAA,GAAG,EAAE1D,IAAV;AAAgB,YAAA,GAAG,EAAE,KAArB;AAA4B,YAAA,KAAK,EAAE;AAACgD,cAAAA,KAAK,EAAE,mBAAR;AAA6BD,cAAAA,MAAM,EAAC;AAApC;AAAnC;AAAA;AAAA;AAAA;AAAA,kBAFH;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAMG;AAAA;AAAA;AAAA;AAAA,gBANH,eAOG,QAAC,KAAD;AAAO,UAAA,IAAI,EAAC,SAAZ;AAAsB,UAAA,YAAY,EAAC,KAAnC;AAAyC,UAAA,EAAE,EAAC,OAA5C;AAAoD,UAAA,WAAW,EAAC,aAAhE;AAA8E,UAAA,QAAQ,EAAEzB,UAAxF;AAAoG,UAAA,KAAK,EAAE;AAAC+B,YAAAA,YAAY,EAAE,MAAf;AAAsBN,YAAAA,MAAM,EAAC,MAA7B;AAAqCC,YAAAA,KAAK,EAAE,MAA5C;AAAmDO,YAAAA,MAAM,EAAE,mBAA3D;AAAgFD,YAAAA,SAAS,EAAE;AAA3F,WAA3G;AAAqO,UAAA,MAAM,eAAE,QAAC,YAAD;AAAc,YAAA,KAAK,EAAE;AAACK,cAAAA,WAAW,EAAE;AAAd;AAArB;AAAA;AAAA;AAAA;AAAA;AAA7O;AAAA;AAAA;AAAA;AAAA,gBAPH,eAQG,QAAC,KAAD,CAAO,QAAP;AAAgB,UAAA,YAAY,EAAE,MAAMhC,KAAK,EAAzC;AAA6C,UAAA,IAAI,EAAC,SAAlD;AAA4D,UAAA,YAAY,EAAC,KAAzE;AAA+E,UAAA,EAAE,EAAC,UAAlF;AAA6F,UAAA,WAAW,EAAC,gBAAzG;AAA0H,UAAA,QAAQ,EAAEL,UAApI;AAAgJ,UAAA,KAAK,EAAE;AAAC+B,YAAAA,YAAY,EAAE,MAAf;AAAuBN,YAAAA,MAAM,EAAC,MAA9B;AAAsCC,YAAAA,KAAK,EAAE,MAA7C;AAAoDO,YAAAA,MAAM,EAAE;AAA5D,WAAvJ;AAAyO,UAAA,MAAM,eAAE,QAAC,YAAD;AAAc,YAAA,KAAK,EAAE;AAACI,cAAAA,WAAW,EAAE;AAAd;AAArB;AAAA;AAAA;AAAA;AAAA;AAAjP;AAAA;AAAA;AAAA;AAAA,gBARH,EAUI9C,MAAM,CAAC+C,MAAP,GAAgB,CAAhB,gBACG;AAAK,UAAA,KAAK,EAAE;AAACL,YAAAA,MAAM,EAAE,iBAAT;AAA4BN,YAAAA,OAAO,EAAE,MAArC;AAA6CE,YAAAA,UAAU,EAAE;AAAzD,WAAZ;AAAA,kCACI,QAAC,aAAD;AAAe,YAAA,KAAK,EAAE;AAACU,cAAAA,QAAQ,EAAC,MAAV;AAAiBF,cAAAA,WAAW,EAAC,KAA7B;AAAqCF,cAAAA,KAAK,EAAE;AAA5C;AAAtB;AAAA;AAAA;AAAA;AAAA,kBADJ,oBACgF,QAAC,IAAD;AAAM,YAAA,IAAI,EAAC,QAAX;AAAA,4BAAsB5C,MAAM,CAAC,CAAD,CAAN,CAAUe,GAAhC;AAAA;AAAA;AAAA;AAAA;AAAA,kBADhF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADH,gBAKG;AAAK,UAAA,KAAK,EAAE;AAAC2B,YAAAA,MAAM,EAAE,iBAAT;AAA4BN,YAAAA,OAAO,EAAE,MAArC;AAA6CE,YAAAA,UAAU,EAAE,QAAzD;AAAmEW,YAAAA,UAAU,EAAE;AAA/E,WAAZ;AAAA,kCACI,QAAC,aAAD;AAAe,YAAA,KAAK,EAAE;AAACD,cAAAA,QAAQ,EAAC,MAAV;AAAiBF,cAAAA,WAAW,EAAC,KAA7B;AAAqCF,cAAAA,KAAK,EAAE;AAA5C;AAAtB;AAAA;AAAA;AAAA;AAAA,kBADJ,oBACgF,QAAC,IAAD;AAAM,YAAA,IAAI,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADhF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAfP,eAmBG,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE9C,OAAjB;AAA0B,UAAA,IAAI,EAAC,SAA/B;AAAyC,UAAA,KAAK,MAA9C;AAA+C,UAAA,OAAO,EAAEgB,KAAxD;AAA+D,UAAA,KAAK,EAAE;AAAC0B,YAAAA,YAAY,EAAE,MAAf;AAAsBN,YAAAA,MAAM,EAAC,MAA7B;AAAsCC,YAAAA,KAAK,EAAE,MAA7C;AAAoDO,YAAAA,MAAM,EAAE;AAA5D,WAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAnBH,eAoBG,QAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAACA,YAAAA,MAAM,EAAE,kBAAT;AAA6BQ,YAAAA,SAAS,EAAE;AAAxC,WAAb;AAAA,iCAA+D,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,kBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA/D;AAAA;AAAA;AAAA;AAAA,gBApBH,eAsBG,QAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAACR,YAAAA,MAAM,EAAE;AAAT,WAAb;AAAA,qEAAyE,QAAC,IAAD;AAAM,YAAA,EAAE,EAAG,UAASxC,QAAQ,GAAI,aAAYA,QAAS,EAAzB,GAA6B,EAAG,EAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAzE;AAAA;AAAA;AAAA;AAAA;AAAA,gBAtBH;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AA+BH,CAnFD;;GAAMX,K;UAOoCN,U;;;KAPpCM,K;AAsFN,eAAeA,KAAf","sourcesContent":["import React, {useContext, useEffect, useState}from 'react'\nimport { UserOutlined, LockOutlined, CloseOutlined } from '@ant-design/icons';\nimport { Card, Typography, Input, Button} from 'antd';\nimport {Link, useHistory} from 'react-router-dom'\n\nimport AuthContext from './AuthContext'\nimport logo from '../img/hsekey.png'\nimport axios from 'axios'\nconst {Title, Text} = Typography\n\n\n\nconst Login = ({history}) => {\n    const {setAuth} = useContext(AuthContext)\n    const[formData, setFormData] = useState({email: \"\", password:\"\"})\n    const [loading, setLoading] = useState(false)\n    const [errors,setErrors] = useState([])\n\n\n    const redirect = (new URLSearchParams(useHistory().location.search)).get('redirect')\n\n    useEffect(() => {\n        document.title = \"HSE Key | Login\"\n    }, [])\n\n    const handleForm = e => {\n       setFormData({...formData, [e.target.id]: e.target.value})\n    }\n\n    const login = async () => {\n        const {email, password} = formData\n        if(!email){\n            setErrors([{msg: \"Please enter a valid email\"}])\n        } else if(!password) {\n            setErrors([{msg: \"Please enter a valid password\"}])\n        } else {\n            try{\n                setLoading(true)\n                const body = {email: email, password: password}\n                const res = await axios.post(`${process.env.REACT_APP_AUTH_API}/user/login?timestamp=${new Date().getTime()}`, body)\n\n                setAuth({user: null, toFetch: true, token: res.data})\n\n                localStorage.setItem(\"token\", res.data)\n                \n                history.push(\"/\")\n                \n                \n\n            } catch(err){\n                setLoading(false)\n\n                if(err.response?.data?.errors){\n                    setErrors(err.response.data.errors)\n\n                } else {\n                    setErrors([{msg: \"Server Error\"}])\n                }\n            }\n        }\n        setTimeout(() => setErrors([]), 2500)\n\n\n    }\n    return(\n        <div style={{height: \"100vh\", width:\"100vw\", display: \"flex\", justifyContent: \"center\", alignItems:\"center\", background: \"#fafcff\"}}>\n             <Card style={{ width: 450, borderRadius: \"20px\", background: \"#fff\", boxShadow: \" 0px 8px 15px -2px rgba(0,0,0,0.1)\" }}>\n                 <div style={{width: \"100%\", margin:\"20px 0px 20px 0px\",display: \"flex\", alignItems: \"center\", flexDirection: \"column\"}}>\n                     <div style={{width: \"78%\", display: \"flex\",alignItems:\"center\", justifyContent: \"space-between\"}}>\n                        <Title level={2} style={{color: \"#444\", paddingTop:\"10px\"}}>Login</Title>\n                        <img src={logo} alt={\"rip\"} style={{width: \"calc(48px * 0.55)\", height:\"calc(50px * 0.55)\"}}></img>\n                     </div>\n\n                    <br></br>\n                    <Input size=\"default\" autoComplete=\"off\" id=\"email\" placeholder=\"Enter email\" onChange={handleForm} style={{borderRadius: \"25px\",height:\"40px\", width: \"80% \",margin: \"25px 0px 10px 0px\", boxShadow: \"0 0 0px 1000px white inset\"}} prefix={<UserOutlined style={{marginRight: \"10px\"}}/>} />\n                    <Input.Password onPressEnter={() => login()} size=\"default\" autoComplete=\"off\" id=\"password\" placeholder=\"Enter password\" onChange={handleForm} style={{borderRadius: \"25px\", height:\"40px\", width: \"80% \",margin: \"10px 0px 25px 0px\"}} prefix={<LockOutlined style={{marginRight: \"10px\"}}/>} />\n\n                    {errors.length > 0 ? \n                        <div style={{margin: \"0px 0px 0px 0px\", display: \"flex\", alignItems: \"center\"}}>\n                            <CloseOutlined style={{fontSize:\"16px\",marginRight:\"5px\" , color: \"red\"}}/> <Text type=\"danger\"> {errors[0].msg} </Text>\n                        </div>\n                     :\n                        <div style={{margin: \"0px 0px 0px 0px\", display: \"flex\", alignItems: \"center\", visibility: \"hidden\"}}>\n                            <CloseOutlined style={{fontSize:\"16px\",marginRight:\"5px\" , color: \"red\"}}/> <Text type=\"danger\"> Error </Text>\n                        </div>\n                    }\n                    <Button loading={loading} type=\"primary\" block onClick={login} style={{borderRadius: \"25px\",height:\"40px\" , width: \"80% \",margin: \"15px 0px 15px 0px\"}}>Login</Button>\n                    <Text style={{margin: \"0px 0px 15px 0px\", textAlign: 'right'}}><Link to=\"/forgot-password\">Forgot password?</Link></Text>\n\n                    <Text style={{margin: \"0px 0px 0px 0px\"}}>Don't have an HSE Key account? <Link to={`/signup${redirect ? `?redirect=${redirect}` : \"\"}`}>Sign up</Link></Text>\n                    \n                 </div>\n             </Card>\n        </div>\n    )\n}\n\n\nexport default Login"]},"metadata":{},"sourceType":"module"}